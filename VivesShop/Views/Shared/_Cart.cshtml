@{
    var cart = Context.Session.GetObjectFromJson<List<VivesShop.Models.ShopItem>>("Cart") ?? new List<VivesShop.Models.ShopItem>();
    decimal total = 0;
}

@if (!cart.Any())
{
    <p class="text-muted">Cart is empty.</p>
}
else
{
    <ul class="list-group list-group-flush mb-3">
        @foreach (var item in cart)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                @item.Name (€ @item.Price)
                <form asp-controller="Cart" asp-action="RemoveFromCart" method="post" class="mb-0">
                    <input type="hidden" name="id" value="@item.Id" />
                    <button type="submit" class="btn btn-sm btn-warning">-</button>
                </form>
            </li>
            total += item.Price;
        }
    </ul>

    <p><strong>Total: € @total</strong></p>

    <div class="d-flex gap-2">
        <form asp-controller="Cart" asp-action="Checkout" method="get">
            <button type="submit" class="btn btn-primary">Checkout</button>
        </form>

        <form asp-controller="Cart" asp-action="ClearCart" method="post">
            <button type="submit" class="btn btn-danger">Clear Cart</button>
        </form>
    </div>
}
